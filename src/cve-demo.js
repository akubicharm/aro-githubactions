function isObject(obj) {
  return obj !== null && typeof obj === 'object';
}

function merge(a, b) {
  for (let key in b) {
    // 本当は、 key が __proto__ の時に処理をスキップすべき
    if (isObject(a[key]) && isObject(b[key])) {
      merge(a[key], b[key]);
    } else {
      a[key] = b[key];
    }
  }
  return a;
}

function clone(obj) {
  return merge({}, obj);
}

const express = require('express');
const app = express();
app.use(express.json());
app.post('/', (req, res) => {
  // ここで外部から不正なJSONをそのままcloneして、オブジェクトのプロトタイプ汚染が起きる
  const obj = clone(req.body);
  const r = {};
  // プロトタイプ汚染によって r.status が改変
  const status = r.status ? r.status: 'NG';
  res.send(status)
});
app.listen(1234);
